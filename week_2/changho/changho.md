# 2주차 

# HTTP
HTML 같은 문서를 브라우저가 웹서버에  요청하고 받는 프로토콜 즉 일종의 대화규칙이다. 

## https와 http의 차이점? 
서칭을 해봤지만 잘 이해가 가지 않음..... 

# 브라우저의 동작원리 

## 브라우저의 주요기능 

브라우저는 사용자가 요청한 자원을 서버에 요청하고 브라우저에 표시한다. 그 자원은 보통 HTML문서이지만 다른 형식일 수도 있다. 자원의 주소는 URI(Uniform Resource Identifier)에 의해 정해진다 

> URI란? URI스키마를 통하여 자원의 주소 등을 식별하기 위해 설계되어진 문자열 이다. (????)
> URL이란? 인터넷 상의 자원의 위치, 특정 웹서버의 특정파일에 접근하기 위한 경로 혹은 주소
> uri는 url을 포함하는 더 큰 개념이다. !!
```
https://www.google.co.kr/search?q=uri  --> 주소를 분석하면
// https 프로토콜을 사용하고 있다 
// 맨 뒤쪽에 /search?q=uri 문자열이 붙어있다 검색 쿼리인 q=''값에 따라 여러 결과가 있을 수 있다
// 여기서 URL은 https://www.google.co.kr/search 까지 이고
// 원하는 정보를 얻기 위해서는 ?q=uri라는 문자열로 된 식별자가 필요하므로 
// 위쪽의 주소는 URI 이지 URL이 아니다

```

브라우저는 HTML과 CSS의 명세에 따라 HTML 파일을 파싱 하여 브라우저에 표시하는데 이 명세는 W3C에서 그 표준을 정한다. 예전에는 각 회사마다 각자의 표준이 달라 호환성에 큰 문제가 있었지만 요즘 추세는 대부분의 브라우저가 W3C의 표준을 따르고 있다...

브라우저의 UI는 대부분 동일 
- URI 입력줄 
- 이전 버튼과 다음 버튼
- 북마크
- 홈버튼 
- 새로고침 혹은 중단버튼

## 브라우저의 기본 구조
![브라우저의 기본구조](https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png)

- UI
- 렌더링 엔진
- 브라우저 엔진
- 통신
- UI 백엔드
- 자바스크립트 해석기
- 자료 저장소

### 1. 브라우저 엔진
사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어 
### 2. 렌더링 엔진
서버가 요청받아서 준 HTML 문서를 파싱하여 브라우저 화면에 렌더링 한다. 

### 3. 렌더링 엔진의 동작 과정
렌더링 엔진은 서버와의 통신을 통하여 html 파일을 받는 것 부터 시작이다. 문서의 내용은 보통 8kb 단위로 전송받는다. 
![렌더링 과정](https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png)
전송 받은 문서를 파싱하여 DOM 구조로 변환 --> 렌더트리 구축 --> 화면 레이아웃 구축 --> 렌더 트리 그리기

### 4. HTML 파싱
파싱이란 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 과정을 말한다. 파싱 결과는 일반적으로 문서 구조를 나타내는 노드트리로 표현된다. 

HTML은 파싱되면 DOM 트리 구조와 속성들의 노드로 출력된다. DOM이란 document object model의 줄임말로 html 문서를 객체화 시켜서 표현한 것이고 javascript와 html요소의 인터페이스 연결점이라고 할 수 있다. 최상위 트리를 Document object라고 표현한다.
예를 들어 아래와 같은 마크업 문서가 있다고 치자
```html
<html>
  <body>
    <p>
      Hello World
    </p>
    <div> <img src="example.png"/></div>
  </body>
</html>
``` 
아래 사진의 돔트리로 해석된다. ![dom tree](https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/image015.png)

HTML 파싱의 특징은 오류를 허용하고 파싱 도중에 문서 수정이 가능하다는 것이다. 

### 5. 자바스크립트 해석 
웹은 파싱과 동시에 실행이 되는 동기적 모델이다. html문서 파일에서 파서가 script 태그를 만나면 html 파싱을 멈추고 script를 해석하고 그 해석이 끝날 때 까지 대기를 해야 script 태그 이후의 문서를 파싱 할 수 있다. 그래서 script 태그에 defer 속성을 추가하여 문서 파싱을 완료 한 후 스크립트를 실행 하게 할 수 있다. 

## 정리 

브라우저가 하는 일은 구체적으로 아래와 같다. 
- 불러오기 (loading)
  - HTTP 프로토콜에 의해 전달 받은 리소스를 읽는 과정 
- 파싱(parsing)
 - DOM 트리를 만드는 과정 
- 렌더링 트리 만들기 
 - 파싱으로 생성한 DOM 트리 구조를 화면에 표시하기 위해 위치와 정보, 그리기 순서 등을 저장하기 위한 별도의 렌더링 트리 생성
- CSS 스타일 결정
 - 모든 CSS 스타일을 분석하여 최종적으로 어떤 태그가 어떤 스타일 규칙에 적용 되는지 결정 
- 레이아웃 
 - 렌더링 트리의 렌더객체에 포함된 정보로 위치와 크기를 갖게 되는 과정
- 그리기 
 - 렌더링 트리를 탐색 하면서 특정 공간에 RGB값을 채우는 과정 

렌더링 엔진 별로 플로우는 조금 씩 다를 수 있지만 기본적인 메인 플로우는 같다고 할 수있다. 


출처: edwith.org, [naver d2](https://d2.naver.com/helloworld/59361)
